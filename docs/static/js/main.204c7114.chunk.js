(this.webpackJsonpcreap=this.webpackJsonpcreap||[]).push([[0],{224:function(t,e,a){t.exports=a.p+"static/media/pen.d2648682.svg"},226:function(t,e,a){t.exports=a(579)},231:function(t,e,a){},232:function(t,e,a){},578:function(t,e,a){},579:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),i=a(220),c=a.n(i),o=(a(231),a(15)),s=a(16),l=a(18),u=a(17),m=a(19),d=a(13),h=a(6),b=(a(232),a(221)),f=a.n(b),g=a(93),p=a.n(g),v="https://chitraBackend.gultion.repl.co",w=a(28),E=a.n(w),O=(console.log,atob(localStorage.getItem("id"))),y=f()(v),j=function(t){y.on("drawingList",(function(e){return t(e)})),y.emit("subscribeForDrawingList",{key:O})},N=function(t){var e=t.name;t.key;y.emit("createDrawing",{name:e,key:O})},k=function(t){y.emit("publishLine",t)},S=a(32);n.Component,a(67);var D=console.log,I=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={drawings:[],temp:[],key:"",redirect:!1,query:"",name:"",isNew:!1,isAuth:!0,status:"Loading ..."},a}return Object(m.a)(e,t),Object(s.a)(e,[{key:"getDrawing",value:function(){var t=this;j((function(e){D(e),t.setState((function(t){return{drawings:e,temp:e,status:"No Drawing Found !"}}))}))}},{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){var t=this;E.a.post("".concat(v,"/auth/check"),{key:atob(localStorage.getItem("id"))}).then((function(e){e.data.success?t.getDrawing():t.setState({isAuth:!1})}))}},{key:"render",value:function(){var t=this,e=this.state.temp.map((function(e){return r.a.createElement("div",{className:"drawingCard card m-1 w-auto shadow-sm ",key:e._id},t.state.redirect&&r.a.createElement(h.a,{to:"/auth"}),r.a.createElement("div",{className:"card-body "},r.a.createElement("h5",{className:"card-title"},e.name),r.a.createElement(d.b,{className:"card-text btn btn-info text-light",to:"/drawings/".concat(e._id)},"Draw"),r.a.createElement("button",{onClick:function(t){return a=e._id,n=function(t){D(t)},void E.a.post(v+"/drawing/delete",{id:a,key:O}).then((function(t){n(t)}));var a,n},className:"btn btn-danger mx-1"},"DELETE")),r.a.createElement("h6",{className:"card-footer text-dimmed"},new Date(e.timestamp).toLocaleString()))}));return r.a.createElement("div",null,this.state.isAuth?null:r.a.createElement(h.a,{to:"/auth"}),r.a.createElement("div",{className:"container mb-2 form"},r.a.createElement("input",{type:"text",className:"form-control",id:"floatingInputGrid",placeholder:"Search",value:this.state.query,onChange:function(e){var a=e.target.value;t.setState({query:a,temp:t.state.drawings.filter((function(t){return-1!=t.name.toLowerCase().indexOf(a)}))})}})),r.a.createElement("div",{className:"d-flex flex-wrap container justify-content-center"},e.length?e:r.a.createElement("h1",null,this.state.status)))}}]),e}(n.Component),x=a(48),C=a(68),L=a(223),T=a.n(L),A=function(t){var e=t.title,a=t.btn,n=t.color;return r.a.createElement("div",{style:{background:n&&"none"},className:"NavBar d-flex align-items-center justify-content-around p-1"},r.a.createElement("h1",{className:"text-light display-3 float-left"},e),r.a.createElement("div",{className:"d-flex align-items-center justify-content-around p-1"},null===a||void 0===a?void 0:a.map((function(t){return t}))))},F=console,P=F.log,B=(F.table,function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).handleDraw=function(t){k(Object(C.a)({drawingId:a.props.drawingId},t))},a.state={lines:[],info:{name:""},brushColor:"black",name:"Loading....",isFound:!1},a}return Object(m.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t,e,a=this,n=window.location.href.split("/").pop();P(n),E.a.post("".concat(v,"/drawing/get"),{id:n}).then((function(t){var e=t.data;P(e),e.success?(a.setState({isFound:!0,name:e.name}),document.title="".concat(e.name," - Chitr")):a.setState({name:"NOT FOUND"})})),t=this.props.drawingId,e=function(t){a.setState((function(e){return{lines:[].concat(Object(x.a)(e.lines),Object(x.a)(t.lines))}}))},p.a.Observable.fromEventPattern((function(e){return y.on("drawingAll:".concat(t),e)}),(function(e){return y.off("drawingAll:".concat(t),e)})).bufferTime(100).map((function(t){return{lines:t}})).subscribe((function(t){return e(t)})),y.emit("subscribeForAllPublishLine",t),function(t,e){p.a.Observable.fromEventPattern((function(e){return y.on("drawing:".concat(t),e)}),(function(e){return y.off("drawing:".concat(t),e)})).bufferTime(100).map((function(t){return{lines:t}})).subscribe((function(t){return e(t)})),y.emit("subscribeForPublishLine",t)}(this.props.drawingId,(function(t){a.setState((function(e){return{lines:[].concat(Object(x.a)(e.lines),Object(x.a)(t.lines))}}))}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,A({title:this.state.name,btn:[r.a.createElement(d.b,{to:"/dashboard",className:"btn"},"dashBoard")]}),this.state.isFound?r.a.createElement("div",{className:"Drawing"},r.a.createElement(T.a,{brushColor:this.state.brushColor,onDraw:this.handleDraw,drawingEnabled:!0,lines:this.state.lines})):null)}}]),e}(n.Component)),W=a(224),_=a.n(W),q=a(47),G=a(225),M={key:""},J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,e=arguments.length>1?arguments[1]:void 0;return e.type,t},R=console.log,H={list:[]},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,e=arguments.length>1?arguments[1]:void 0;e.data;switch(e.type){case"GET_DRAWING_LIST":return new Promise((function(e,a){j((function(a){R("GET_DRAWING_LIST "+a.length),R(t.list),e(Object(C.a)({},t,{list:a}))}))}));default:return t}},$=Object(q.b)({auth:J,drawing:U}),z=Object(q.c)($,Object(q.a)(G.a)),K=(console.log,function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).state={email:"",password:"",success:!1},a}return Object(m.a)(e,t),Object(s.a)(e,[{key:"auth",value:function(t){var e=this,a=this.state,n=a.email,r=a.password;E.a.post("".concat(v,"/auth/").concat(t),{email:n,password:r}).then((function(t){var a=t.data;a.success?(localStorage.setItem("id",btoa(a.id)),e.setState({success:!0})):alert(a.message)}))}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"Auth h-100"},A({title:"Auth Page",btn:[],color:!0}),r.a.createElement("div",{className:"container-fluid d-flex align-items-center"},this.state.success&&r.a.createElement(h.a,{to:"/dashboard"}),r.a.createElement("form",{className:"from",style:{width:"100%",maxWidth:"330px",padding:"15px",margin:"auto"},onSubmit:function(t){return t.preventDefault()}},r.a.createElement("img",{className:"mb-4",src:_.a,alt:"",width:"72",height:"72"}),r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal text-light"},"Please sign in/up"),r.a.createElement("input",{onChange:function(e){return t.setState({email:e.target.value})},value:this.state.email,name:"email",type:"email",id:"inputEmail",className:"form-control mb-2",placeholder:"Email address",required:!0,autoFocus:!0}),r.a.createElement("input",{onChange:function(e){return t.setState({password:e.target.value})},value:this.state.password,name:"password",type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}),r.a.createElement("button",{onClick:function(e){return t.auth("signin")},className:"btn btn-lg btn-primary btn-block mt-2 ms-2 text-light",type:"submit"},"Sign in"),r.a.createElement("button",{onClick:function(e){return t.auth("signup")},className:"btn btn-lg btn-info btn-block mt-2 ms-2 text-light",type:"submit"},"Sign up"))))}}]),e}(n.Component)),Q=function(){var t=Object(n.useState)(!1),e=Object(S.a)(t,2),a=e[0],i=e[1];return E.a.post("".concat(v,"/auth/check"),{key:atob(localStorage.getItem("id"))}).then((function(t){t.data.success?i(!0):i(!1)})),r.a.createElement("div",{className:"HomePage"},A({title:"Chitr",btn:[a?r.a.createElement("button",{className:"btn",onClick:function(){localStorage.setItem("id",""),i(!1)}},"Log Out"):r.a.createElement(d.b,{to:"auth",className:"btn"},"Log In"),a&&r.a.createElement(d.b,{to:"dashboard",className:"btn"},"dashBoard")]}))},V=function(t){function e(){return Object(o.a)(this,e),Object(l.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(m.a)(e,t),Object(s.a)(e,[{key:"render",value:function(){return r.a.createElement("div",{className:"DashBoard container-fluid"},A({title:"DashBoard",btn:[r.a.createElement(d.b,{to:"/",className:"btn"},"< Back")],color:!0}),r.a.createElement(I,null))}}]),e}(r.a.Component),X={TITLE:"LineDraw"},Y=console.log,Z=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(l.a)(this,Object(u.a)(e).call(this,t))).selectDrawing=function(t){a.setState({selectedDrawing:t})},a.state={selectedDrawing:{id:"",name:""},title:X.TITLE},a}return Object(m.a)(e,t),Object(s.a)(e,[{key:"componentWillMount",value:function(){this.setState({title:X.TITLE}),Y(z.getState())}},{key:"render",value:function(){var t=this;return r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/"},r.a.createElement(Q,null)),r.a.createElement(h.b,{path:"/dashboard"},r.a.createElement(V,null)),r.a.createElement(h.b,{path:"/auth"},r.a.createElement(K,null)),r.a.createElement(h.b,{path:"/drawings/:drawingId",render:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(B,{drawingId:e.match.params.drawingId,drawing:t.state.selectedDrawing}))}}))))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(578);c.a.render(r.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))},67:function(t,e,a){}},[[226,1,2]]]);
//# sourceMappingURL=main.204c7114.chunk.js.map