(this.webpackJsonpcreap=this.webpackJsonpcreap||[]).push([[0],{223:function(e,t,a){e.exports=a.p+"static/media/pen.5d33362d.svg"},225:function(e,t,a){e.exports=a(577)},230:function(e,t,a){},231:function(e,t,a){},577:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(219),c=a.n(i),l=(a(230),a(22)),s=a(23),o=a(25),u=a(24),m=a(26),d=a(30),h=a(6),f=(a(231),a(220)),g=a.n(f),b=a(92),p=a.n(b),w="https://chitraBackend.gultion.repl.co/",v=(console.log,atob(localStorage.getItem("id"))),E=g()(w),N=function(e){E.on("drawingList",(function(t){return e(t)})),E.emit("subscribeForDrawingList",{key:v})},O=function(e){var t=e.name;e.key;E.emit("createDrawing",{name:t,key:v})},y=function(e){E.emit("publishLine",e)},j=a(67);function D(e){var t=Object(n.useState)(0),a=Object(j.a)(t,2),i=a[0],c=a[1],l=Object(n.useState)(""),s=Object(j.a)(l,2),o=s[0],u=s[1],m=Object(n.useState)(""),d=Object(j.a)(m,2),h=d[0],f=d[1];return r.a.createElement("div",{className:"NewAdd"},r.a.createElement("div",{className:"row"},r.a.createElement("select",{name:"",id:"",className:"type",onChange:function(e){c(e.target.value)}},r.a.createElement("option",{value:0},"Select Permissions"),[{text:"Public can VIEW, EDIT AND DELETE",value:1},{text:"Public can VIEW, EDIT",value:2},{text:"Public can VIEW",value:3},{text:"Public can't do anything",value:4}].map((function(e){return r.a.createElement("option",{value:e.value},e.text)}))),""==h||""==o&&1!=i?null:r.a.createElement("button",{className:"save",onClick:function(t){t.preventDefault(),O({name:h,key:o}),u(""),f(""),e.save()}},"SAVE")),i>1?r.a.createElement("input",{value:o,onChange:function(e){return u(e.target.value)},type:"text",placeholder:"Password of Drawing",className:"key"}):null,0!=i?r.a.createElement("input",{value:h,onChange:function(e){return f(e.target.value)},type:"text",placeholder:"Name of Drawing",className:"name"}):null)}n.Component;var S=a(31),k=a.n(S),I=console.log,x=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={drawings:[],temp:[],key:"",redirect:!1,query:"",name:"",isNew:!1,isAuth:!0},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"getDrawing",value:function(){var e=this;N((function(t){I("Getting List"),e.setState((function(e){return{drawings:t,temp:t}}))}))}},{key:"componentDidMount",value:function(){var e=this;this.getDrawing(),k.a.post("".concat(w,"/auth/check"),{key:atob(localStorage.getItem("id"))}).then((function(t){t.data.success||e.setState({isAuth:!1})}))}},{key:"render",value:function(){var e=this,t=this.state.temp.map((function(t){return r.a.createElement("div",{className:"card m-1 w-auto shadow-sm",key:t._id,onClick:function(a){e.props.onSelectDrawing(t),I(t)}},e.state.redirect&&r.a.createElement(h.a,{to:"/auth"}),r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},t.name),r.a.createElement(d.b,{className:"card-text btn btn-info text-light",to:"/drawings/".concat(t._id)},"Draw")),r.a.createElement("h6",{className:"card-footer text-dimmed"},new Date(t.timestamp).toLocaleString()))}));return r.a.createElement("div",null,this.state.isAuth?null:r.a.createElement(h.a,{to:"/auth"}),r.a.createElement("div",{className:"row g-2 m-2"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-floating"},r.a.createElement("input",{type:"text",className:"form-control",id:"floatingInputGrid",placeholder:"Search",value:this.state.query,onChange:function(t){var a=t.target.value;e.setState({query:a,temp:e.state.drawings.filter((function(e){return-1!=e.name.toLowerCase().indexOf(a)}))})}}),r.a.createElement("label",{for:"floatingInputGrid"},"Search"))),r.a.createElement("div",{className:"col-3 display-6 rounded"},r.a.createElement("div",{className:" bg-dark text-light rounded",onClick:function(t){e.state.isNew&&(O({name:e.state.name}),e.getDrawing()),e.setState({isNew:!e.state.isNew,name:""})}},this.state.isNew?"SAVE":"NEW"))),this.state.isNew&&r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"form-floating"},r.a.createElement("input",{type:"text",className:"form-control",id:"floatingInputGrid",placeholder:"NAME",value:this.state.name,onChange:function(t){var a=t.target.value;e.setState({name:a})}}),r.a.createElement("label",{for:"floatingInputGrid"},"New Drawing Name")))),r.a.createElement("div",{className:"d-flex flex-wrap justify-content-center"},t.length?t:r.a.createElement("h1",null,"LOADING ...")))}}]),t}(n.Component),C=a(47),L=a(66),A=a(222),T=a.n(A),P=console,F=P.log,G=(P.table,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleDraw=function(e){y(Object(L.a)({drawingId:a.props.drawingId},e))},a.state={lines:[],info:{name:""},brushColor:"black",name:"Loading....",isFound:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e,t,a=this,n=window.location.href.split("/").pop();F(n),k.a.post("".concat(w,"/drawing/get"),{id:n}).then((function(e){var t=e.data;F(t),t.success?(a.setState({isFound:!0,name:t.name}),F(t)):a.setState({name:"NOT FOUND"})})),e=this.props.drawingId,t=function(e){a.setState((function(t){return{lines:[].concat(Object(C.a)(t.lines),Object(C.a)(e.lines))}}))},p.a.Observable.fromEventPattern((function(t){return E.on("drawingAll:".concat(e),t)}),(function(t){return E.off("drawingAll:".concat(e),t)})).bufferTime(100).map((function(e){return{lines:e}})).subscribe((function(e){return t(e)})),E.emit("subscribeForAllPublishLine",e),function(e,t){p.a.Observable.fromEventPattern((function(t){return E.on("drawing:".concat(e),t)}),(function(t){return E.off("drawing:".concat(e),t)})).bufferTime(100).map((function(e){return{lines:e}})).subscribe((function(e){return t(e)})),E.emit("subscribeForPublishLine",e)}(this.props.drawingId,(function(e){a.setState((function(t){return{lines:[].concat(Object(C.a)(t.lines),Object(C.a)(e.lines))}}))}))}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,this.state.name),this.state.isFound?r.a.createElement("div",{className:"Drawing"},r.a.createElement(T.a,{brushColor:this.state.brushColor,onDraw:this.handleDraw,drawingEnabled:!0,lines:this.state.lines})):null)}}]),t}(n.Component)),W=a(223),_=a.n(W),q=a(46),V=a(224),B={key:""},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;return t.type,e},J=console.log,R={list:[]},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;t.data;switch(t.type){case"GET_DRAWING_LIST":return new Promise((function(t,a){N((function(a){J("GET_DRAWING_LIST "+a.length),J(e.list),t(Object(L.a)({},e,{list:a}))}))}));default:return e}},$=Object(q.b)({auth:M,drawing:U}),z=Object(q.c)($,Object(q.a)(V.a)),H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={email:"",password:"",success:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"auth",value:function(e){var t=this,a=this.state,n=a.email,r=a.password;k.a.post("".concat(w,"/auth/").concat(e),{email:n,password:r}).then((function(e){var a=e.data;a.success?(localStorage.setItem("id",btoa(a.id)),t.setState({success:!0}),window.location.pathname="/dashboard"):alert(a.message)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container h-100 d-flex align-items-center"},r.a.createElement("form",{className:"from",style:{width:"100%",maxWidth:"330px",padding:"15px",margin:"auto"},onSubmit:function(e){return e.preventDefault()}},r.a.createElement("img",{className:"mb-4",src:_.a,alt:"",width:"72",height:"72"}),r.a.createElement("h1",{className:"h3 mb-3 font-weight-normal"},"Please sign in/up"),r.a.createElement("input",{onChange:function(t){return e.setState({email:t.target.value})},value:this.state.email,name:"email",type:"email",id:"inputEmail",className:"form-control mb-2",placeholder:"Email address",required:!0,autoFocus:!0}),r.a.createElement("input",{onChange:function(t){return e.setState({password:t.target.value})},value:this.state.password,name:"password",type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}),r.a.createElement("button",{onClick:function(t){return e.auth("signin")},className:"btn btn-lg btn-primary btn-block mt-2",type:"submit"},"Sign in"),r.a.createElement("button",{onClick:function(t){return e.auth("signup")},className:"btn btn-lg btn-info btn-block mt-2 ms-2 text-light",type:"submit"},"Sign up")))}}]),t}(n.Component),K={TITLE:"LineDraw"},Q=console.log,X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).selectDrawing=function(e){a.setState({selectedDrawing:e})},a.state={selectedDrawing:{id:"",name:""},title:K.TITLE},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.setState({title:K.TITLE}),Q(z.getState())}},{key:"render",value:function(){var e=this;return r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/"},r.a.createElement("h1",null,"homePage"),r.a.createElement(d.b,{to:"/auth"},"Auth"),r.a.createElement(d.b,{to:"dashboard"},"DashBoard")),r.a.createElement(h.b,{path:"/dashboard"},r.a.createElement("h1",null,this.state.title),r.a.createElement(x,{onSelectDrawing:function(t){e.selectDrawing(t)}})),r.a.createElement(h.b,{path:"/auth"},r.a.createElement(H,null)),r.a.createElement(h.b,{path:"/drawings/:drawingId",render:function(t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,e.state.selectedDrawing.name),r.a.createElement(G,{drawingId:t.match.params.drawingId,drawing:e.state.selectedDrawing}))}}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[225,1,2]]]);
//# sourceMappingURL=main.bf0b3a52.chunk.js.map